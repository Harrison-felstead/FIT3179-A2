<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Australian Weather Dashboard</title>

  <!-- Vega Libraries -->
  <script src="https://cdn.jsdelivr.net/npm/vega@5"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-lite@6"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-embed@6"></script>

  <!-- CSS Layout -->
  <link rel="stylesheet" href="style.css">

  <style>
    /* Particle canvas background */
    body {
      margin: 0;
      background-color: #ffffff; /* white background */
      font-family: Arial, sans-serif;
    }

    canvas#background {
      position: absolute;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      z-index: -1;
      pointer-events: none;
      mask-image: radial-gradient(#ffffff, transparent 80%);
    }
  </style>
</head>

<body>
  <!-- Particle background canvas -->
  <canvas id="background"></canvas>

  <!-- Dashboard Content -->
  <h1>Australian Weather Dashboard</h1>
  <div class="dashboard">
    <p style="text-align: center;"> 
      Explore Australia's weather history through interactive charts and visualisations. <br>
       Discover how wind, temperature, and rainfall patterns have shifted across regions and through time.
    </p>
  </div>

  <section class="map-section">
    <img src="images/AustraliaImg.png" alt="Australian Map" class="map-image">
  </section>
  <div style="height: 50px;"></div>


  <!-- Description card -->
  <div class="dashboard">
    <div class="description-card">
      <h2>Temperature insights</h2>
      <p>
        This interactive graph shows the average monthly maximum and minimum temperatures at each weather monitoring station across Australia between 2008 and 2017.
        Patterns and trends can be observed across different regions of the nation and how over the months the temperature varies. <br> Toggle between temperature type using the legend to obverve the maximum and minimum temperatures trends.
        You can also ultlise the scroll bar to toggle what month you would like to view. Hovering over a location will provide detailed information such as name, maximum and minimum temperatures.
      </p>
    </div>
    <div id="chart1" class="chart"></div>
  </div>

  <!-- Density and bar charts -->
  <div class="dashboard">
    <div class="dashboard">
      <div class="description-card">
        <h2>Temperature Density Plot</h2>
        <div id="chart2" class="graph-small"></div>
        <p>
          This density plot illustrates the distribution of temperature readings across Australia.
          Darker areas indicate higher concentrations of temperature data points.
        </p>
      </div>
    <div id="chart4" class="chart"></div>
  </div>

  <!-- City dropdown -->
  <div class="light-blue-bar">
    <h2>Select Weather Station:</h2> &nbsp;&nbsp;&nbsp;&nbsp;
    <select id="citySelect">
      <option value="Adelaide">Adelaide</option>
      <option value="AliceSprings">AliceSprings</option>
      <option value="Albury">Albury</option>
      <option value="Albany">Albany</option>
      <option value="Ballarat">Ballarat</option>
      <option value="BadgerysCreek">BadgerysCreek</option>
      <option value="Bendigo">Bendigo</option>
      <option value="Brisbane">Brisbane</option>
      <option value="Cairns">Cairns</option>
      <option value="Canberra">Canberra</option>
      <option value="Cobar">Cobar</option>
      <option value="CoffsHarbour">CoffsHarbour</option>
      <option value="Dartmoor">Dartmoor</option>
      <option value="Darwin">Darwin</option>
      <option value="GoldCoast">GoldCoast</option>
      <option value="Hobart">Hobart</option>
      <option value="Katherine">Katherine</option>
      <option value="Launceston">Launceston</option>
      <option value="Melbourne">Melbourne</option>
      <option value="MelbourneAirport">MelbourneAirport</option>
      <option value="Moree">Moree</option>
      <option value="MountGambier">MountGambier</option>
      <option value="MountGinini">MountGinini</option>
      <option value="Newcastle">Newcastle</option>
      <option value="NorahHead">NorahHead</option>
      <option value="NorfolkIsland">NorfolkIsland</option>
      <option value="Nhil">Nhil</option>
      <option value="Nuriootpa">Nuriootpa</option>
      <option value="Penrith">Penrith</option>
      <option value="Perth">Perth</option>
      <option value="PerthAirport">PerthAirport</option>
      <option value="Portland">Portland</option>
      <option value="Richmond">Richmond</option>
      <option value="SalmonGums">SalmonGums</option>
      <option value="Sale">Sale</option>
      <option value="Sydney">Sydney</option>
      <option value="SydneyAirport">SydneyAirport</option>
      <option value="Townsville">Townsville</option>
      <option value="Tuggeranong">Tuggeranong</option>
      <option value="Uluru">Uluru</option>
      <option value="WaggaWagga">WaggaWagga</option>
      <option value="Watsonia">Watsonia</option>
      <option value="Walpole">Walpole</option>
      <option value="Williamtown">Williamtown</option>
      <option value="Witchcliffe">Witchcliffe</option>
      <option value="Wollongong">Wollongong</option>
    </select>
  </div>

  <!-- Radar and scatter charts -->
  <div class="dashboard">
    <div id="chart3" class="chart"></div>
    <div class="description-card">
      <h2>Temperature Scatterplot</h2>
      <p>
        The scatterplot visualises how the maximum and minimum temperatures vary throughout the year for the selected weather station.
        Each point represents that day's temperature readings with red for maximum and blue for minimum temperatures. <br>
        This shows the seasonal trends and fluctuations in temperature over the months, how the difference between max and min temperatures changes, and any outlier temperature events.
        <br>
      </p>
    </div>
    <div class="description-card">
      <h2>Wind Radar Charts</h2>
      <p>
        The radar charts display wind direction and speed distributions for the selected weather station.
        Each spoke represents a cardinal, and the distance from the center indicates the frequency or speed of winds from that direction. <br>
        This allows you to identify prevailing wind patterns at the station, such as dominant wind directions and typical wind speeds.
      </p>
    </div>

    <div class="description-card">
      <h2>Number of days Wind direction radar chart</h2>
      <div id="chart5" class="graph-small"></div>
    </div>

    <div class="description-card">
      <h2>Wind speed and direction radar chart</h2>
      <div id="chart6" class="graph-small"></div>
    </div>    
  </div>

  <div class="dashboard">
    <p style="text-align: center; font-size: 0.9em;"> 
      Data Source: <a href="https://www.kaggle.com/datasets/jsphyg/weather-dataset-rattle-package/discussion?sort=hotness" target="_blank">Rain In Australia</a> by Joe Young <br>
      Inspiration for particle flow background: <a href="https://www.nativewind.dev/" target="_blank">Tailwind CSS website</a> <br>
      Created by Harrison Felstead for FIT3179 Semester 2, 2025
    </p>
  </div>

  <!-- Particle Script -->
  <script>
    const canvas = document.getElementById('background');
    const ctx = canvas.getContext('2d');
    const particles = [];
    const mouse = { x: window.innerWidth / 2, y: window.innerHeight / 2 };
    const center = { x: window.innerWidth / 2, y: window.innerHeight / 2 };
    const CENTER_OFFSET_X = 1.2; // 0.5 = middle, 0.3 = more left
    const CENTER_OFFSET_Y = 1.2; // 0.5 = middle, 0.7 = lower

    function resize() {
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;
      center.x = window.innerWidth / 2 * CENTER_OFFSET_X;
      center.y = window.innerHeight / 2 * CENTER_OFFSET_Y;
    }
    window.addEventListener('resize', resize);
    resize();

    window.addEventListener('mousemove', e => {
      mouse.x = e.clientX;
      mouse.y = e.clientY;
    });

    class Particle {
      constructor() { this.reset(); }
      reset() {
        const angle = Math.random() * Math.PI * 2;
        const radius = Math.random() * (canvas.width / 2) + 200;
        this.x = center.x + Math.cos(angle) * radius;
        this.y = center.y + Math.sin(angle) * radius;
        this.size = Math.random() * 1.5 + 0.5;
        const speed = Math.random() * 0.5 + 0.2;
        this.vx = Math.cos(angle + Math.PI / 2) * speed;
        this.vy = Math.sin(angle + Math.PI / 2) * speed;
        this.lifespan = Math.random() * 3 + 1;
        this.age = 0;
        this.alpha = 1;
      }
      update() {
        this.age += 1/60;
        if(this.age > this.lifespan){
          this.alpha -= 0.02;
          if(this.alpha <= 0){ this.reset(); return; }
        }
        const dx = this.x - mouse.x;
        const dy = this.y - mouse.y;
        const dist = Math.sqrt(dx*dx + dy*dy);
        const attraction = Math.max(300 - dist, 0) * 0.000002;
        this.vx -= dx * attraction;
        this.vy -= dy * attraction;
        const angleToMouse = Math.atan2(dy, dx);
        const swirlStrength = Math.max(150 - dist, 0) * 0.00000005;
        this.vx += Math.cos(angleToMouse + Math.PI/2) * swirlStrength * 50;
        this.vy += Math.sin(angleToMouse + Math.PI/2) * swirlStrength * 50;
        const dxC = this.x - center.x;
        const dyC = this.y - center.y;  
        const distC = Math.sqrt(dxC*dxC + dyC*dyC);
        const spiralAngle = Math.atan2(dyC, dxC);
        const spiralPull = Math.max(800 - distC, 0) * 0.0000003;
        this.vx -= dxC * spiralPull;
        this.vy -= dyC * spiralPull;
        this.vx += Math.cos(spiralAngle + Math.PI/2) * spiralPull * 70;
        this.vy += Math.sin(spiralAngle + Math.PI/2) * spiralPull * 70;
        this.vx *= 0.98;
        this.vy *= 0.98;
        this.x += this.vx;
        this.y += this.vy;
        if(distC < 10) this.reset();
        if(this.x < -50) this.x = canvas.width + 50;
        if(this.x > canvas.width + 50) this.x = -50;
        if(this.y < -50) this.y = canvas.height + 50;
        if(this.y > canvas.height + 50) this.y = -50;
      }
      draw() {
        ctx.beginPath();
        ctx.arc(this.x, this.y, this.size, 0, Math.PI*2);
        ctx.fillStyle = `rgba(128,128,128,${this.alpha})`;
        ctx.shadowBlur = 6;
        ctx.shadowColor = 'rgba(128,128,128,0.6)';
        ctx.fill();
      }
    }

    for(let i=0;i<1500;i++) particles.push(new Particle());

    function animate() {
      ctx.fillStyle = 'rgba(255,255,255,0.08)';
      ctx.fillRect(0,0,canvas.width,canvas.height);
      for(const p of particles){ p.update(); p.draw(); }
      requestAnimationFrame(animate);
    }

    animate();
  </script>

  <!-- Vega Chart Embedding -->
  <script>
    async function embedChart(id, jsonFile){ return await vegaEmbed(id,jsonFile,{actions:false}); }
    vegaEmbed('#chart1','charts/map.vg.json',{actions:false});
    vegaEmbed('#chart2','charts/densityPlot.vg.json',{actions:false});
    vegaEmbed('#chart4','charts/bar.vg.json',{actions:false});

    let radarDir, radarSpeed, scatterPlot;
    embedChart('#chart5','charts/radarDir.vg.json').then(v=>radarDir=v);
    embedChart('#chart6','charts/radarSpeed.vg.json').then(v=>radarSpeed=v);
    embedChart('#chart3','charts/scatterplot.vg.json').then(v=>scatterPlot=v);

    document.getElementById('citySelect').addEventListener('change', function(){
      const selectedCity = this.value;
      if(radarDir && radarSpeed){
        radarDir.view.signal('selectedCity',selectedCity).run();
        radarSpeed.view.signal('selectedCity',selectedCity).run();
      }
      if(scatterPlot){
        scatterPlot.view.signal('selectedCity',selectedCity).run();
      }
    });
  </script>
</body>
</html>
